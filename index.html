
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Zeltlager Strichliste</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    h1 { text-align: center; }
    select, button { font-size: 18px; margin: 5px; padding: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 8px; text-align: center; }
    tr:nth-child(even) { background: #e9e9e9; }
    .btn-plus { background-color: #28a745; color: white; border: none; padding: 5px 10px; font-size: 16px; }
    .btn-minus { background-color: #dc3545; color: white; border: none; padding: 5px 10px; font-size: 16px; }
    .name-col { text-align: left; padding-left: 10px; }
    #statistik { display: none; }
    canvas { max-width: 100%; }
  </style>
</head>
<body>
<h1 id="ueberschrift">Zeltlager Strichliste ‚Äì Samstag</h1>

<div id="liste-seite" style="text-align: center;">
  <label for="tagSelector">W√§hle einen Tag:</label>
  <select id="tagSelector">
    <option>Samstag</option><option>Sonntag</option><option>Montag</option>
    <option>Dienstag</option><option>Mittwoch</option><option>Donnerstag</option><option>Freitag</option>
  </select>
  <br>
  <button onclick="zeigeStatistik()">üìä Statistik anzeigen</button>
</div>

<table id="liste"></table>

<div id="statistik" style="display:none; text-align:center;">
  <h2>Wochengesamt-Statistik</h2>
  <canvas id="chart"></canvas>
  <br><button onclick="zurueckZurListe()">‚¨ÖÔ∏è Zur√ºck</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let initialNames = ["Anna", "Ben", "Clara"];
let tage = {};
let aktuellerTag = "Samstag";
let tageNamen = ["Samstag","Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag"];

function initDaten() {
  tageNamen.forEach(tag => {
    if (!tage[tag]) {
      tage[tag] = {};
      initialNames.forEach(n => tage[tag][n] = {soft: 0, wasser: 0, bier: 0, last: {}});
    }
  });
}

function zeige() {
  document.getElementById("ueberschrift").textContent = "Zeltlager Strichliste ‚Äì " + aktuellerTag;
  let table = document.getElementById("liste");
  table.innerHTML = "<tr><th>Name</th><th>Soft</th><th>Wasser</th><th>Bier</th></tr>";
  let data = tage[aktuellerTag];
  Object.keys(data).forEach(name => {
    let tr = document.createElement("tr");
    let tdName = document.createElement("td");
    tdName.className = "name-col";
    tdName.textContent = name;
    tr.appendChild(tdName);
    ["soft", "wasser", "bier"].forEach(cat => {
      let td = document.createElement("td");
      let plus = document.createElement("button");
      plus.textContent = "+";
      plus.className = "btn-plus";
      plus.onclick = () => {
        data[name][cat]++;
        data[name].last[cat] = "plus";
        zeige();
      };
      let minus = document.createElement("button");
      minus.textContent = "‚àí";
      minus.className = "btn-minus";
      minus.onclick = () => {
        if (data[name].last[cat] === "plus" && data[name][cat] > 0) {
          data[name][cat]--;
          data[name].last[cat] = null;
          zeige();
        }
      };
      td.appendChild(plus);
      td.appendChild(minus);
      td.appendChild(document.createTextNode(" " + data[name][cat]));
      tr.appendChild(td);
    });
    table.appendChild(tr);
  });
}

document.getElementById("tagSelector").onchange = (e) => {
  aktuellerTag = e.target.value;
  zeige();
};

function zeigeStatistik() {
  document.getElementById("liste-seite").style.display = "none";
  document.getElementById("liste").style.display = "none";
  document.getElementById("statistik").style.display = "block";
  zeichneChart();
}

function zurueckZurListe() {
  document.getElementById("liste-seite").style.display = "block";
  document.getElementById("liste").style.display = "table";
  document.getElementById("statistik").style.display = "none";
}

function zeichneChart() {
  let soft = [], wasser = [], bier = [];
  tageNamen.forEach(tag => {
    let s=0, w=0, b=0;
    for (const name in tage[tag]) {
      s += tage[tag][name].soft;
      w += tage[tag][name].wasser;
      b += tage[tag][name].bier;
    }
    soft.push(s); wasser.push(w); bier.push(b);
  });
  const ctx = document.getElementById("chart").getContext("2d");
  if (window.barChart) window.barChart.destroy();
  window.barChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: tageNamen,
      datasets: [
        { label: 'Softgetr√§nke', data: soft },
        { label: 'Wasser', data: wasser },
        { label: 'Bier', data: bier }
      ]
    },
    options: { responsive: true }
  });
}

initDaten();
zeige();
</script>
</body>
</html>


